# Caddyfile.prod (Restoring the verbose, but often more stable, syntax)

sgchess.chriscortese.net {
    root * /app/public
    php_server

    @api path /api/*
    handle @api {
        uri strip_prefix /api
        reverse_proxy backend:8000
    }

    handle {
        try_files {path} /index.php
        file_server
    }
}

