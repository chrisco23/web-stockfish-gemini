sgchess.chriscortese.net {
    # This is the domain name Caddy will obtain the cert for

    # Global options block to enable the DNS challenge
    # Caddy will automatically try the DNS challenge because you've defined the provider
    # inside a TLS block.
    
    # TLS Configuration to use the DNS provider
    tls {
        # The first argument is the provider name (cloudflare)
        # The second argument is the API token (taken from the environment variable)
        dns cloudflare {env.CLOUDFLARE_API_TOKEN}
        
        # Optional: Force Caddy to use Cloudflare's own DNS resolver to check propagation
        # This can prevent timeouts.
        resolvers 1.1.1.1
    }

    # Your existing FrankenPHP/PHP setup
    root * /app
    php_server

    # Reverse proxy or other setup, if you are running Caddy as a separate service
    # If you are using FrankenPHP directly, the above two lines are usually enough.

    # Access logging
    log
}
